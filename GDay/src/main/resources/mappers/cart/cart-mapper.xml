<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cartMapper">

	<resultMap type="Baguni" id="cart_rm">
		<id property="cartNo" column="CART_NO"/>
		
   		<result property="cartAmount" column="CART_AMOUNT"/>
  		<result property="prdtNo" column="PRDT_NO"/>
  		<result property="memNo" column="MEM_NO"/>
  		<result property="gOptNo" column="G_OPT_NO"/>
  		<result property="prdtType" column="PRDT_TYPE"/>
	</resultMap>
	
	<!-- 장바구니 조회 -->
	<select id="selectBaguni" parameterType="_int" resultMap="cart_rm">
		SELECT * FROM BAGUNI
		WHERE MEM_NO = #{memberNo};
	</select>
	
	<!-- 클래스 장바구니에 추가 -->
	<insert id="insertClassCart" parameterType="map">
		INSERT INTO BAGUNI(CART_NO, CART_AMOUNT, PRDT_NO, MEM_NO, G_OPT_NO ,PRDT_TYPE, PRDT_PRICE)
		SELECT SEQ_BGNNO.NEXTVAL, #{amount}, #{prdtNo}, #{memberNo}, null ,'C', #{price} FROM DUAL A
		WHERE NOT EXISTS (SELECT 0 FROM BAGUNI WHERE PRDT_NO = #{prdtNo})
	</insert>
	
</mapper>